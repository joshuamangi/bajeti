{% extends "base.html" %}

{% block title %}
Edit Profile - Bajeti
{% endblock %}

{% block content %}
{% if error %}
<div
  class="p-alert-error"
  role="alert"
  style="
    margin: 0.5rem 0;
    padding: 0.6rem 1rem;
    border-radius: 0.4rem;
    background: var(--danger);
    color: var(--bg-light);
    box-shadow: var(--shadow);
  "
>
  <i class="fa fa-exclamation-circle"></i>
  <span style="margin-left: 0.5rem">{{ error }}</span>
</div>
{% endif %}

<section class="p-login">
  <div class="p-register-container">
    <h1 class="p-input-header">Edit Profile</h1>

    <form method="POST" action="/profile/update" class="p-signin-details">
      <label for="first_name">First Name</label>
      <input
        type="text"
        id="first_name"
        name="first_name"
        placeholder="Enter First Name"
        value="{{ user.first_name }}"
        required
      />

      <label for="last_name">Last Name</label>
      <input
        type="text"
        id="last_name"
        name="last_name"
        placeholder="Enter Last Name"
        value="{{ user.last_name }}"
        required
      />

      <label for="email">Email</label>
      <input
        type="email"
        id="email"
        name="email"
        placeholder="Enter Email"
        value="{{ user.email }}"
        required
      />

      <label for="security_answer">What was your childhood best friend's name?</label>
      <div class="p-password-field">
        <input
          type="password"
          id="security_answer"
          name="security_answer"
          placeholder="Enter Security Answer"
          value="{{ user.security_answer or '' }}"
        />
        <i class="fa fa-eye p-eye-toggle" id="toggleSecurityAnswer"></i>
      </div>

      <button type="submit" class="p-login-button">
        <span class="p-btn-text">
          <i class="fa fa-save"></i> Save Changes
        </span>
      </button>

      <hr class="p-divider" />

      <div class="p-password-section">
        <h2 class="p-password-header">Password Settings</h2>
        <p class="p-password-text">
          Want to reset your password? Click below to start the process.
        </p>
        <a href="/forgot_password" class="p-forgot-btn">
          <i class="fa fa-key"></i> Forgot Password
        </a>
      </div>

      <div class="p-auth-links">
        <p>
          <a href="/dashboard" style="color: var(--primary)">
            <i class="fa fa-arrow-left"></i> Back to Dashboard
          </a>
        </p>
      </div>
    </form>
  </div>
</section>
{% endblock %}
