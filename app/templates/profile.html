{% extends "base.html" %}
{% block content %}

<div class="container my-4">
  <h2 class="mb-4 text-center text-md-start">
    <i class="bi bi-person-circle me-2"></i> Edit Profile
  </h2>

  <!-- âœ… User Info Card -->
  <div class="card shadow-sm border-0">
    <div class="card-body">
      <form method="POST" action="/profile/update">

        <!-- Name Fields -->
        <div class="row g-3 mb-3">
          <div class="col-md-6">
            <label for="first_name" class="form-label fw-semibold">First Name</label>
            <input type="text" class="form-control" id="first_name" name="first_name"
                   value="{{ user.first_name }}" required>
          </div>
          <div class="col-md-6">
            <label for="last_name" class="form-label fw-semibold">Last Name</label>
            <input type="text" class="form-control" id="last_name" name="last_name"
                   value="{{ user.last_name }}" required>
          </div>
        </div>

        <!-- Email -->
        <div class="mb-3">
          <label for="email" class="form-label fw-semibold">Email</label>
          <input type="email" class="form-control" id="email" name="email"
                 value="{{ user.email }}" required>
        </div>

        <!-- Security Question -->
        <div class="mb-4">
          <label for="security_answer" class="form-label fw-semibold">
            Security Answer (for password recovery)
          </label>
          <input type="text" class="form-control" id="security_answer" name="security_answer"
                 value="{{ user.security_answer or '' }}" placeholder="What is your childhood best friend's name?">
        </div>
        <!-- Action Buttons -->
        <div class="d-flex justify-content-between align-items-center flex-wrap">
          <a href="/dashboard" class="btn btn-outline-secondary mb-2">
            <i class="bi bi-arrow-left"></i> Back to Dashboard
          </a>
          <button type="submit" class="btn btn-primary mb-2">
            <i class="bi bi-save"></i> Save Changes
          </button>
        </div>

        <!-- ðŸ”’ Password Section -->
        <hr class="my-4">
        <div class="mb-3 text-center text-md-start">
          <h5 class="fw-semibold mb-2">Password Settings</h5>
          <p class="text-muted small mb-3">
            If you want to reset your password, click the button below to reset it.
          </p>
          <a href="/forgot_password" class="btn btn-outline-warning btn-sm rounded-pill mb-3">
            <i class="bi bi-question-circle me-1"></i> Forgot Password?
          </a>
        </div>

      </form>
    </div>
  </div>
</div>

<style>
/* ðŸ”¹ Mobile-friendly spacing and readability */
form .form-label {
  font-size: 0.95rem;
}
.card {
  border-radius: 0.75rem;
}
.card-body {
  padding: 1.5rem;
}
@media (max-width: 576px) {
  h2 {
    font-size: 1.25rem;
  }
  .btn {
    width: 100%;
  }
}
</style>

<script>
// âœ… Optional password match validation
document.addEventListener("DOMContentLoaded", function () {
  const form = document.querySelector("form");
  form.addEventListener("submit", function (e) {
    const pwd = document.getElementById("password").value;
    const confirm = document.getElementById("confirm_password").value;
    if (pwd && pwd !== confirm) {
      e.preventDefault();
      alert("Passwords do not match!");
    }
  });
});
</script>

{% endblock %}
